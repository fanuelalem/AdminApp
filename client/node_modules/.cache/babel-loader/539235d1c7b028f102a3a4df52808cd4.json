{"ast":null,"code":"const ACCEPTABLE_CONTENT_TYPE = /^(multipart\\/.+);(.*)$/i;\nconst UNACCEPTABLE_METHODS = ['GET', 'HEAD'];\n/**\n * Ensures the request contains a content body\n * @param  {Object}  req Express req object\n * @returns {Boolean}\n */\n\nconst hasBody = req => {\n  return 'transfer-encoding' in req.headers || 'content-length' in req.headers && req.headers['content-length'] !== '0';\n};\n/**\n * Ensures the request is not using a non-compliant multipart method\n * such as GET or HEAD\n * @param  {Object}  req Express req object\n * @returns {Boolean}\n */\n\n\nconst hasAcceptableMethod = req => !UNACCEPTABLE_METHODS.includes(req.method);\n/**\n * Ensures that only multipart requests are processed by express-fileupload\n * @param  {Object}  req Express req object\n * @returns {Boolean}\n */\n\n\nconst hasAcceptableContentType = req => ACCEPTABLE_CONTENT_TYPE.test(req.headers['content-type']);\n/**\n * Ensures that the request in question is eligible for file uploads\n * @param {Object} req Express req object\n * @returns {Boolean}\n */\n\n\nmodule.exports = req => hasBody(req) && hasAcceptableMethod(req) && hasAcceptableContentType(req);","map":null,"metadata":{},"sourceType":"script"}